
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>A tale of categories and extensions - miqu.me</title>
  <meta name="author" content="Miguel Angel Quiñones">

   
  <meta name="description" content="Software engineering thoughts">
  
  <meta name="keywords" content="">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://miqu.me/blog/2014/12/20/a-tale-of-categories-and-extensions">
  <link href="/favicon.png" rel="icon">
  <link href='https://fonts.googleapis.com/css?family=Quicksand:300,400' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300' rel='stylesheet' type='text/css'>
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="miqu.me" type="application/atom+xml">
  <script src="/js/jquery.js"></script>
  <script src="/js/bootstrap-collapse.js"></script>
  <script src="/js/modernizr-2.0.js"></script>
  <script src="/js/octopress.js" type="text/javascript"></script>
  <script src="/js/application.js"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="https://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <div class="navbar navbar-inverse navbar-static-top">
  	<div class="navbar-inner">
  	  <div class="container">
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".navbar-responsive-collapse">
          <span class="fui-menu-24"></span>
        </a>
  	  	<div class="nav-collapse collapse navbar-responsive-collapse" style="height:0;">
  	      <ul class="nav">
    
        <li ><a href="/">Blog</a></li>
    
        <li ><a href="/about/">Who?</a></li>
    
        <li ><a href="/games/">Games</a></li>
    
        <li ><a href="/speaking/">Speaking</a></li>
    
</ul>

<ul class="nav pull-right">
    
    <li><a href="https://github.com/DarthMike" title="Github Profile"><i class="icon-github-sign social-navbar"></i></a></li>
    
    
    
    <li><a href="https://linkedin.com/in/miguelquinon" title="Linkedin Profile"><i class="icon-linkedin-sign social-navbar"></i></a></li>
    
    
    <li><a href="https://twitter.com/@miguelquinon" title="Twitter Profile"><i class="icon-twitter-sign social-navbar"></i></a></li>
    
    
    
    

    
    <li><a href="mailto:miguel@miqu.me" title="Email"><i class="icon-envelope social-navbar"></i></a></li>
    
</ul>

  	    </div>
  	  </div>
  	</div>
  </div>
  <div class="container" id="main">
      <div class="row-fluid">
        <div id="content">
          <div>
<article class="hentry" role="article">
  

  <header>
  <div class="jumbotron">
    A Tale of Categories and Extensions
	<h5>








  



<i class="icon-calendar-empty"></i> <time datetime="2014-12-20T21:37:17+00:00" pubdate data-updated="true">20 Dec 2014</time></h5>
  </div>
</header>
  <div class="row-fluid">
    <div class="span12">
      <p>I’ve gradually been changing my code style favouring (<em>Obj-C</em>) categories and (<em>Swift</em>) extensions a lot more. I’ve been inspired by my other lover (<em>Ruby</em>). Why? Readability and code organisation.</p>

<!-- more -->


<h1>Rubyisms</h1>

<p>Let me explain my source of inspiration. I’ve been coding with Ruby from time to time this whole year, and one of the features I really like is <strong>opening classes</strong>.</p>

<p>As a matter of fact, classes in Ruby are never closed. Any file can add to a class declaration whatever it sees fit. You can add methods, nested classes, and properties. This is often used to either add functionality, or to add more expressivity to the code.</p>

<p>A classic example:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Float</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">dollars</span>
</span><span class='line'>      <span class="nb">self</span>    
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">euro</span>
</span><span class='line'>      <span class="mi">0</span><span class="o">.</span><span class="mi">817</span> <span class="o">*</span> <span class="nb">self</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>So you can express:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">price</span> <span class="o">=</span> <span class="mi">18</span><span class="o">.</span><span class="mi">9</span>
</span><span class='line'><span class="n">euro_price</span> <span class="o">=</span> <span class="n">price</span><span class="o">.</span><span class="n">euro</span>
</span><span class='line'><span class="c1">#instead of, for example</span>
</span><span class='line'><span class="n">price</span> <span class="o">=</span> <span class="mi">18</span><span class="o">.</span><span class="mi">9</span>
</span><span class='line'><span class="n">euro_price</span> <span class="o">=</span> <span class="nb">self</span><span class="o">.</span><span class="n">euro_to_dollars</span> <span class="o">*</span> <span class="n">price</span>
</span></code></pre></td></tr></table></div></figure>


<p>The rules for this in Ruby are simple, you can add to existing classes and modify methods and properties. Opening a class and modifying it <a href="http://www.infoq.com/articles/ruby-open-classes-monkeypatching">can create serious problems</a>, but this is the nature of the language. In Ruby you can change even essential parts of the language and the standard libraries.</p>

<h1>The patterns</h1>

<p>From now on I will be giving examples using <em>Swift extensions</em>. You can apply the examples to Objective-C categories, but bear in mind that <strong>they are not exactly same</strong>, and <strong>they don’t offer the same functionality</strong> - More on that just a bit later.</p>

<p>Please don’t confuse <em>Swift extensions</em> with <em>Objective-C class extensions</em>. There is no swift counterpart to <em>Objective-C class extensions</em>.</p>

<p>So how do I like to (<em>ab-</em>)use extensions?</p>

<h2>Factory methods for 3rd party code</h2>

<p>Let’s say you are using a 3rd party library. The library offers an awesome control and it is very customisable:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">//File MQAwesomeControl.swift in 3rd party framework</span>
</span><span class='line'><span class="k">import</span> <span class="n">UIKit</span>
</span><span class='line'>  
</span><span class='line'><span class="n">public</span> <span class="k">class</span> <span class="nl">MQAwesomeControl</span> <span class="p">:</span> <span class="bp">UIControl</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">public</span> <span class="k">var</span> <span class="nl">zoomEnabled</span><span class="p">:</span> <span class="n">Bool</span> <span class="o">=</span> <span class="nb">false</span>
</span><span class='line'>    <span class="n">public</span> <span class="k">var</span> <span class="nl">colouringEnabled</span><span class="p">:</span> <span class="n">Bool</span> <span class="o">=</span> <span class="nb">false</span>
</span><span class='line'>    <span class="c1">// More specific customisation options</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>But in your application you configure that control in a very specific way, from many different parts of your UI code. Instead of creating a <em>configurator</em> object with static methods, or specific <em>configuration</em> methods on your types,  you can create an extension on the 3rd party type to offer more API and specific configuration for your application. This keeps your code DRY and separates the configuration of 3rd party types from your code.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">//File MQAwesomeControl_MyApp.swift in your app</span>
</span><span class='line'><span class="k">extension</span> <span class="n">MQAwesomeControl</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">class</span> <span class="k">func</span> <span class="n">myapplicationControl</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">MQAwesomeControl</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">var</span> <span class="n">control</span> <span class="o">=</span> <span class="n">MQAwesomeControl</span><span class="p">()</span>
</span><span class='line'>        <span class="n">control</span><span class="p">.</span><span class="n">zoomEnabled</span> <span class="o">=</span> <span class="nb">true</span>
</span><span class='line'>        <span class="n">control</span><span class="p">.</span><span class="n">colouringEnabled</span> <span class="o">=</span> <span class="nb">true</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">control</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Semantic separation of APIs</h2>

<p>This is possibly the best known use of this feature. The only drawback is that you can’t add stored properties, so API extensions only containing methods are the best candidates.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">class</span> <span class="n">Car</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">init</span><span class="p">(</span><span class="nl">brand</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="nb">self</span><span class="p">.</span><span class="n">brand</span> <span class="o">=</span> <span class="n">brand</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">var</span> <span class="nl">brand</span><span class="p">:</span> <span class="n">String</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="c1">//MARK: Steering</span>
</span><span class='line'><span class="k">extension</span> <span class="n">Car</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">func</span> <span class="n">accelerate</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>        <span class="c1">//..</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">func</span> <span class="n">decelerate</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>        <span class="c1">//..</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//MARK: Reparing</span>
</span><span class='line'><span class="k">extension</span> <span class="n">Car</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">internal</span> <span class="k">var</span> <span class="nl">needsRepairing</span><span class="p">:</span> <span class="n">Bool</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="nb">self</span><span class="p">.</span><span class="n">motorNeedsRepairing</span> <span class="o">||</span> <span class="nb">self</span><span class="p">.</span><span class="n">wheelsAreBroken</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">internal</span> <span class="k">func</span> <span class="n">repair</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">if</span> <span class="o">!</span><span class="nb">self</span><span class="p">.</span><span class="n">needsRepairing</span> <span class="p">{</span>
</span><span class='line'>            <span class="k">return</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">// Actually repair</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">private</span> <span class="k">var</span> <span class="nl">motorNeedsRepairing</span><span class="p">:</span> <span class="n">Bool</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="nb">false</span> <span class="c1">// Here do your calculations for motor</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">private</span> <span class="k">var</span> <span class="nl">wheelsAreBroken</span><span class="p">:</span> <span class="n">Bool</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="nb">false</span> <span class="c1">// Here do your calculations for wheels</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Protocol adoption</h2>

<p>You can interface two disparate types, in different files, by adopting a protocol in an extension, rather than in the type declaration.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">//File Person.swift</span>
</span><span class='line'><span class="k">class</span> <span class="n">Person</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">var</span> <span class="nl">name</span><span class="p">:</span> <span class="n">String</span><span class="o">?</span>
</span><span class='line'>    <span class="k">var</span> <span class="nl">surname</span><span class="p">:</span> <span class="n">String</span><span class="o">?</span>
</span><span class='line'>    <span class="k">var</span> <span class="nl">friends</span><span class="p">:</span> <span class="p">[</span><span class="n">Person</span><span class="p">]</span><span class="o">?</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//RelatedEntities.swift</span>
</span><span class='line'><span class="k">protocol</span> <span class="n">RelatedEntities</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">var</span> <span class="nl">similarEntities</span><span class="p">:</span> <span class="p">[</span><span class="n">RelatedEntities</span><span class="p">]</span> <span class="p">{</span><span class="kr">get</span><span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//Adoption of protocol in Person_Extensions.swift</span>
</span><span class='line'><span class="k">extension</span> <span class="nl">Person</span><span class="p">:</span> <span class="n">RelatedEntities</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">var</span> <span class="nl">similarEntities</span><span class="p">:</span> <span class="p">[</span><span class="n">RelatedEntities</span><span class="p">]</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">if</span> <span class="k">let</span> <span class="n">friends</span> <span class="o">=</span> <span class="nb">self</span><span class="p">.</span><span class="n">friends</span><span class="o">?</span> <span class="p">{</span>
</span><span class='line'>            <span class="k">return</span> <span class="n">friends</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="p">[]</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>UI styling</h2>

<p>Instead of relying on a gigantic stylesheet-type file, where all appearance setup is made, you can use extensions specific to your application to style UI components. Here I use the previous pattern of adopting a protocol in an extension:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">//Protocol in MyApplicationStyles.swift</span>
</span><span class='line'><span class="k">protocol</span> <span class="n">MyAppliationStyling</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">func</span> <span class="n">setupAppearance</span><span class="p">()</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//Extension, possibly in the same file as protocol</span>
</span><span class='line'><span class="k">extension</span> <span class="nl">UITableView</span><span class="p">:</span> <span class="n">MyAppliationStyling</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">func</span> <span class="n">setupAppearance</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>        <span class="bp">UITableView</span><span class="p">.</span><span class="n">appearance</span><span class="p">().</span><span class="n">separatorColor</span> <span class="o">=</span> <span class="bp">UIColor</span><span class="p">.</span><span class="n">darkGrayColor</span><span class="p">()</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//Usage, on Stylesheet.swift</span>
</span><span class='line'><span class="k">class</span> <span class="n">Stylesheet</span> <span class="p">{</span>
</span><span class='line'>      <span class="c1">//…</span>
</span><span class='line'>    <span class="k">func</span> <span class="n">customiseAppearance</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>        <span class="bp">UITableView</span><span class="p">.</span><span class="n">setupAppearance</span><span class="p">()</span>
</span><span class='line'>              <span class="c1">//etc</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>      <span class="c1">//…</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Additionally, you can create extensions to reflect your designer’s stylesheet.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">extension</span> <span class="bp">UIColor</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">class</span> <span class="k">func</span> <span class="n">brandColor</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">UIColor</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">UIColor</span><span class="p">.</span><span class="n">yellowColor</span><span class="p">()</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">class</span> <span class="k">func</span> <span class="n">backgroundColor</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">UIColor</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">UIColor</span><span class="p">.</span><span class="n">whiteColor</span><span class="p">()</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">class</span> <span class="k">func</span> <span class="n">highlightColor</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">UIColor</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">UIColor</span><span class="p">.</span><span class="n">redColor</span><span class="p">()</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Extracting specific logic for readability</h2>

<p>Sometimes you may want to split a slightly complex method into different private methods.</p>

<p>If your logic requires manipulating a 3rd party or framework type, then you can extract that part of logic into an extension of the 3rd party type instead of extracting it into another method in your type.</p>

<h1>The language details</h1>

<h2>Objective-C categories</h2>

<p>Objective-C categories offer similar functionality as Ruby’s open classes. You can override existing methods and, using the runtime, you can ‘inject’ your code between the previous implementation and yours. They are very flexible, but unfortunately very dangerous.</p>

<h2>Swift Extensions</h2>

<p>In Swift, the programmer can extend not only classes, but enums and structs. Extensions in Swift are safer because they are namespaced to the module they belong to, and you can’t override existing behaviour.</p>

<p>They are less flexible because you can’t override existing behaviour, and you don’t have access to the runtime to ‘plug into’ existing code.</p>

<h2>Shooting everybody on the foot</h2>

<p>Why did I write about alternatives to do the same thing on 3 different languages?</p>

<p>There is very good reasons to take categories and opening classes as a bad practice. It’s very easy to misuse and abuse, creating problems for any users of your code, and breaking functionality with newer releases of OS and libraries. I’ve already mentioned before safety problems of categories.</p>

<p>Please don’t do this in Objective-C:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="c1">//PLEASE DON’T DO THIS!</span>
</span><span class='line'><span class="k">@implementation</span> <span class="bp">UIView</span> <span class="nl">(MyCategory)</span>
</span><span class='line'><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">dealloc</span> <span class="p">{</span>
</span><span class='line'>  <span class="c1">//Here I do my stuff, and I break existing dealloc for UIView AND subclasses</span>
</span><span class='line'>  <span class="c1">//Compiler and runtime don’t complain, until you get other crashes, or your code misbehaves…</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Other methods</span>
</span><span class='line'><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure>


<p>If you are using Objective-C you should prefix the category names <strong>and</strong> the method names with your project prefix. This will ensure that no other code clashes with yours at run-time. This is <a href="https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html#//apple_ref/doc/uid/TP40011210-CH6-SW1">standard practice</a> for any competent Obj-C developer.</p>

<p>What is not so well understood is that you can start changing method implementations from categories in any class, meaning you can do exactly what Ruby does with open classes. If you start swizzling implementations and many libraries do the same, there’s high risk that there will be undefined behaviour. Tshe code starts to be hard to understand because of too much runtime magic.</p>

<p>Even though you are on the safe side by adhering to best practices and not abusing the runtime. The same best practices sometimes pollute the beauty of categories. If you need to prefix every method name, the code does not look so clean and elegant.</p>

<p>Swift offers the best balance with extensions. Thus I think it is perfect for a very <em>aggressive</em> use of extensions, as the code will fail to compile when methods and properties have the same name across classes and extensions. The extensions are implicitly namespaced in different modules, so no clash will happen between libraries and between libraries and application code.</p>

<h1>Conclusion</h1>

<p>I think extensions is one of the best features of Swift, and a vast improvement over Objective-C categories. I have shown you examples of how you can use extensions for your advantage.</p>

<p>The best feature of Swift extensions, in my opinion, is safety. All types and extensions are implicitly namespaced under a module, per-target in Xcode. This means all complex clashes of similar additions between different modules (libraries, application) are gone.</p>

<p>Many developers would say that Swift extensions are not so flexible as Objective-C categories. Not having access to the runtime, you can’t exchange method implementations to add behaviour or to capture method executions for your own (evil) needs. While this is true, many times this flexibility is limited to small hacks, debugging or proof of concept prototypes. You can still Objective-C for that if you wish.</p>

<p>If you have more ideas on how to use extensions for fun and profit, please <a href="https://twitter.com/miguelquinon">tell me</a>!</p>

    </div>
  </div>



  <footer>
    <hr>
    
    <div class="row-fluid">
      
      <div class="span6">
        <p class="meta">
        
        



  <a href="/blog/categories/code-style/"><span class="badge">code style</span></a>

  <a href="/blog/categories/ios/"><span class="badge">ios</span></a>

  <a href="/blog/categories/objective-c/"><span class="badge">objective-c</span></a>

  <a href="/blog/categories/swift/"><span class="badge">swift</span></a>




        </p>
      </div>
      
      <div class="span6 social-sharing">
        <div class="sharing">
  <div class="addthis_toolbox addthis_default_style ">
  
  
  <a class="addthis_button_tweet"></a>
  
  
  <a class="addthis_counter addthis_pill_style"></a>
  </div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>

      </div>
      
      
    </div>
    
    <div class="row-fluid">
      <div class="span12">
        <p class="meta">
          
            <a class="basic-alignment left" href="/blog/2014/11/27/travis-plus-octopress-equals-yay/" title="Previous Post: Travis + octopress = Yay!">&laquo; Travis + octopress = Yay!</a>
          
          
            <a class="basic-alignment right" href="/blog/2015/01/14/tip-exfat-hdd-with-raspberry-pi/" title="Next Post: Tip: ExFat HDD with Raspberry Pi">Tip: ExFat HDD with Raspberry Pi &raquo;</a>
          
        </p>
      </div>
    </div>
  </footer>
</article>

</div>



        </div>
      </div>
      <div class="row-fluid">
        <footer class="footer-page" role="contentinfo">
          <p>
  Copyright &copy; 2018 - Miguel Angel Quiñones -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span> - Theme by <a href="http://alexgaribay.com">Alex Garibay</a>
</p>


        </footer>
      </div>
  </div>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'https://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
